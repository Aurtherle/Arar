import { createHash } from 'crypto'
import PhoneNumber from 'awesome-phonenumber'
import { canLevelUp, xpRange } from '../lib/levelling.js'
import fetch from 'node-fetch'
import fs from 'fs'
const { levelling } = '../lib/levelling.js'
import moment from 'moment-timezone'
import { promises } from 'fs'
import { join } from 'path'
const time = moment.tz('Asia/Riyadh).format('HH')
let wib = moment.tz('Asia/Riyadh).format('HH:mm:ss')
//import db from '../lib/database.js'

let handler = async (m, { conn, usedPrefix, command}) => {
    let d = new Date(new Date + 3600000)
    let locale = 'ar'
    let week = d.toLocaleDateString(locale, { weekday: 'long' })
    let date = d.toLocaleDateString(locale, { day: 'numeric', month: 'long', year: 'numeric' })
    let _uptime = process.uptime() * 1000
    let uptime = clockString(_uptime)
let who = m.quoted ? m.quoted.sender : m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
if (!(who in global.db.data.users)) throw `âœ³ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª`
let vn = './media/Madara.mp3'
//let pp = await conn.profilePictureUrl(who, 'image').catch(_ => './src/avatar_contact.png')
let user = global.db.data.users[who]
let {money, joincount} = global.db.data.users[m.sender];
let { name, exp, diamond, lastclaim, registered, regTime, age, level, role, warn } = global.db.data.users[who]
let { min, xp, max } = xpRange(user.level, global.multiplier)
let username = conn.getName(who)
let rtotal = Object.entries(global.db.data.users).length || '0'
let math = max - xp
let prem = global.prems.includes(who.split`@`[0])
let sn = createHash('md5').update(who).digest('hex')
let rtotalreg = Object.values(global.db.data.users).filter(user => user.registered == true).length 
let more = String.fromCharCode(8206)
let readMore = more.repeat(850) 
let taguser = '@' + m.sender.split("@s.whatsapp.net")[0]
global.fcontact = { key: { fromMe: false, participant: `0@s.whatsapp.net`, remoteJid: 'status@broadcast' }, message: { contactMessage: { displayName: `${name}`, vcard: `BEGIN:VCARD\nVERSION:3.0\nN:;a,;;;\nFN:${name}\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD`}}}
    m.react('ðŸ“ƒ')
    const str = `
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
*â— Ù…Ø±Ø­Ù€Ù€Ø¨Ù€Ø§ âŒŠ${name}âŒ‰*
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*

â—  ðŸŽ©  *Ø§Ù„Ø§Ø³Ù€Ù…:* ${name} 
â—  ðŸ’Ž  *Ø§Ù„Ø£Ù„Ù€Ù…Ø§Ø³:* ${diamond} 
â—  ðŸ†  *Ø§Ù„Ù€Ø±ØªØ¨Ø©:* ${role}
â—  ðŸŽ®  *Ø§Ù„Ø®Ø¨Ù€Ø±Ø©:* ${exp}
â—  ðŸª™  *Ø¹Ù…Ù„Ø§Øª:* ${money}
â—  ðŸŽŸï¸  *Ø§Ù„Ø±Ù…ÙˆØ²:* ${joincount}

*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*

â—  ðŸ“†  *ØªÙ€Ø§Ø±ÙŠÙ€Ø® Ø§Ù„ÙŠÙ€ÙˆÙ…:* ${date} 
â—  â²ï¸  *Ø§Ù„Ù€ÙˆÙ‚Ù€Øª Ø§Ù„Ù€Ø­Ø§Ù„Ù€ÙŠ:* ${wib} 

*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*

â—  âœ¨  *Ø§Ø³Ù€Ù… Ø§Ù„Ø¨Ù€ÙˆØª:* ${botname} 
â—  ðŸ’»  *Ø§Ù„Ù…Ù€Ù†ØµÙ€Ø©:* ð‘¯ð‘¬ð‘¹ð‘¶ð‘²ð‘¼ 
â—  ðŸ•“  *ÙˆÙ‚Ù€Øª Ø§Ù„Ù€ØªÙ€Ø´ØºÙŠÙ€Ù„:* ${uptime}
â—  ðŸ“š  *Ø¥Ø¬Ù€Ù…Ø§Ù„Ù€ÙŠ Ø§Ù„Ù…Ù€Ø³ØªØ®Ù€Ø¯Ù…ÙŠÙ€Ù†:* ${rtotal} 

*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
*â˜° ÙˆØ§Ù…Ù€Ø± Ø§Ù„Ø¨Ù€ÙˆØªâ†¯Â°*
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥ðŸŒâ”‚Ø§Ù„Ù€Ø¬Ù€Ø±ÙˆØ¨â”‚ðŸŒâ©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸš«â¯ .Ø§Ù†Ø°Ø§Ø±
â— â­•â¯ .Ø±ÙØ¹-Ø§Ù†Ø°Ø§Ø±
â— ðŸš·â¯ .Ø§Ù„Ø§Ù†Ø°Ø§Ø±Ø§Øª
â— âž•â¯ .Ø¯Ø¹ÙˆÙ‡
â— ðŸ“§â¯ .Ù…Ù†Ø´Ù†
â— ðŸ‘½â¯ .Ù…Ø®ÙÙŠ
â— ðŸ‘¨ðŸ½â€âœˆï¸â¯ .Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†
â— ðŸ›‹ï¸â¯ .Ø¬Ø±ÙˆØ¨
â— ðŸš¸â¯ .Ø·Ø±Ø¯
â— â™»ï¸â¯ .Ø±Ø³ØªØ±
â— ðŸ—‘ï¸â¯ .Ø­Ø°Ù
â— ðŸ¤¿â¯ .ÙˆØ§ØªØ³
â— ðŸª€â¯ .Ù„ÙŠÙ†Ùƒ
â— ðŸ“°â¯ .Ø¬Ø±ÙˆØ¨ÙŠ
â— ðŸ“‡â¯ .ÙØ­Øµ
â— ðŸ“¢â¯ .ØªØºÙŠØ±Ø§Ù„ØªØ±Ø­ÙŠØ¨ 
â— â˜ ï¸â¯ .ØªØºÙŠØ±Ø§Ù„ÙˆØ¯Ø§Ø¹
â— â†—ï¸â¯ .Ø±ÙØ¹ 
â— â†˜ï¸â¯ .Ø®ÙØ¶
â— ðŸ“â¯ .ØªØºÙŠØ±-Ø§Ù„Ø§Ø³Ù… 
â— ðŸ—’ï¸â¯ .ØªØºÙŠØ±Ø§Ù„ÙˆØµÙ 
â— ðŸ“¸â¯ .ØªØºÙŠØ±Ø§Ù„ØµÙˆØ±Ù‡
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥ðŸ§ŽðŸ½â€â™‚ï¸â”‚Ø§Ù„Ù€Ù€Ø¯ÙŠÙ€Ù€Ù†â”‚ðŸ•‹â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸŒƒâ¯ .Ø§Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡
â— â˜€â¯ .Ø§Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­
â— ðŸ§ŽðŸ½â€â™‚ï¸â¯ .Ø§Ù„Ù„Ù‡
â— ðŸ“–â¯ .Ù‚Ø±Ø§Ù†
â— ðŸ“ºâ¯ .Ù‚Ø±Ø§Ù†2
â— ðŸ“¿â¯ .Ø§Ø°ÙƒØ§Ø±
â— ðŸ“„â¯ .Ø§ÙŠØ©
â— ðŸ•‹â¯ .Ø§ÙŠÙ‡-Ø§Ù„ÙƒØ±Ø³ÙŠ
â— ðŸ“™â¯ .Ø³ÙˆØ±
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
          â©¥âš™ï¸â”‚Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øªâ”‚ðŸ§°â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸŽˆâ¯ .Ù…Ù„ØµÙ‚
â— ðŸ˜‚â¯ .Ù…ÙŠÙ…
â— ðŸ“â¯ .ÙƒÙˆØ¯
â— ðŸƒâ¯ .ÙØ¶Ø­
â— Â©ï¸â¯ .Ø³Ø±Ù‚Ù‡
â— ðŸžï¸â¯ .Ù„ØµÙˆØ±Ø©
â— ðŸŽªâ¯ .Ù„Ø§Ù†Ù…ÙŠ
â— âœ¨â¯ .Ù„ÙƒØ±ØªÙˆÙ†
â— ðŸŽžï¸â¯ .Ù„ÙÙŠØ¯ÙŠÙˆ
â— ðŸ”Šâ¯ .Ù„ØµÙˆØª
â— ðŸ”—â¯ .ØªÙ„ÙŠØ¬Ø±Ø§Ù
â— ðŸŽ­â¯ .Ø¯Ù…Ø¬
â— ðŸŽ²â¯ .Ù†Ø±Ø¯
â— ðŸŽ™ï¸â¯ .Ø§Ù†Ø·Ù‚
â— ðŸŽ™ï¸â¯ .Ø§Ù†Ø·Ù‚2
â— ðŸŽâ¯ .Ù…Ø·Ù„ÙˆØ¨
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥ðŸŽ®â”‚Ø§Ù„Ø¹Ø§Ø¨â”‚ðŸŽ®â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸŽ­â¯ .ÙØ¹Ø§Ù„ÙŠÙ‡
â— â“â¯ .Ø§Ù†Ù…ÙŠ
â— âš½â¯ .ÙƒÙˆØ±Ù‡
â— ðŸŽµâ¯ .ØªØ®Ù…ÙŠÙ†
â— ðŸŽˆâ¯ .Ø§Ù„Ø¹Ø§Ø¨
â— âš½â¯ .Ø±ÙŠØ§Ø¶Ù‡
â— âŒâ¯ .Ø§ÙƒØ³_Ø§Ùˆ
â— ðŸ“› .Ø§Ù…Ø³Ø­
â— ðŸ¢â¯ .Ù‚Ø±Ø¹Ù‡
â— ðŸ§®â¯ .Ø±ÙŠØ§Ø¶ÙŠØ§Øª
â— ðŸŽ°â¯ .Ø±Ù‡Ø§Ù†
â— ðŸ’ðŸ»â€â™‚ï¸â¯ .Ø´Ø®ØµÙŠØ©
â— â“â¯ .Ø§Ø­Ø²Ø±
â— ðŸ‘€â¯ .Ø¹ÙŠÙ†
â— ðŸŽˆâ¯ .Ø§ÙŠÙ…ÙˆØ¬ÙŠ
â— âš¡â¯ .Ø³Ø¤Ø§Ù„
â— ðŸŽ®â¯ .ÙƒØª
â— ðŸ”¤â¯ .Ø§Ø­Ø±Ù
â— ðŸ‡ªðŸ‡¬â¯ .Ø¹Ù„Ù…
â— ðŸ¤”â¯ .Ø®Ù…Ù†
â— ðŸ” â¯ .ÙÙƒÙƒ
â— ðŸ”¡â¯ .Ø±ØªØ¨
â— â”â¯ .Ø§Ø¬Ø§Ø¨Ù‡
â— â”â¯ .Ø¯ÙŠÙ†
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥ðŸŽ®â”‚Ø§Ù„ØªØ±ÙÙŠÙ‡â”‚ðŸŽ®â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— â“â¯ .Ù‡Ù„
â— â“â¯ .Ù„Ùˆ
â— ðŸ’¡â¯ .Ù†ØµÙŠØ­Ù‡
â— ðŸ¤â¯ .ØµØ±Ø§Ø­Ù‡
â— ðŸ‘‘â¯ .ØªØ§Ø¬
â— ðŸ’â¯ .Ø²ÙˆØ§Ø¬
â— ðŸ’”â¯ .Ø·Ù„Ø§Ù‚
â— ðŸ‘¬â¯ .ØµØ¯ÙŠÙ‚
â— ðŸ‘¬â¯ .Ø±ÙÙŠÙ‚
â— ðŸ™‹â€â™‚ï¸â¯ .ØªØ­Ø¯Ø§Ù†ÙŠ
â— ðŸ†â¯ .ØªÙˆØ¨
â— ðŸ˜‚â¯ .Ù…ÙŠÙ…Ø²
â— ðŸ—£â¯ .Ù…Ù‚ÙˆÙ„Ø§Øª
â— ðŸ’•â¯ .Ø§Ù„Ø­Ø¨
â— ðŸŽžâ¯ .Ø§ÙÙ„Ø§Ù…
â— ðŸ’€â¯ .ÙÙŠÙ„Ù…-Ø±Ø¹Ø¨
â— ðŸ“½â¯ .ÙÙŠÙ„Ù…-Ø§ÙƒØ´Ù†
â— ðŸŽ­â¯ .ÙÙŠÙ„Ù…-ØºÙ…ÙˆØ¶
â— âœ¨â¯ .ÙÙŠÙ„Ù…-Ø¯Ø±Ø§Ù…Ø§
â— ðŸ±â€ðŸ‘¤â¯ .Ø´Ø®ØµÙŠÙ‡
â— ðŸ‘½â¯ .Ø°ÙƒØ§Ø¡
â— ðŸ¤¡â¯ .ØºØ¨Ø§Ø¡
â— â˜ â¯ .Ø§Ø®ØªØ±Ø§Ù‚
â— ðŸ¤™â¯ .Ø¨ÙˆØ³Øª
â— ðŸŒŸâ¯ .Ø§Ù‚ØªØ¨Ø§Ø³
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥âš™ï¸â”‚Ø§Ù„Ù€Ø£Ø¯Ø§ÙˆØ§Øªâ”‚ðŸ§®â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸ’¬â¯ .ØªØ¹Ù„ÙŠÙ‚
â— ðŸ‘€â¯ .Ø´ÙˆÙ
â— ðŸ¤–â¯ .Ø²ÙˆØ±Ùˆ
â— ðŸŒ â¯ .Ø¬ÙˆØ¯Ù‡
â— âœðŸ»â¯ .Ø²Ø®Ø±ÙÙ‡
â— ðŸŽŸï¸â¯ .Ø¨Ø§Ø±ÙƒÙˆØ¯
â— ðŸ¹â¯ .ØªØ±Ø¬Ù…Ø©
â— ðŸ€„â¯ .Ù„ÙˆØ¬Ùˆ
â— ã€°ï¸â¯ .ÙˆÙ‡Ù…ÙŠ 
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
          â©¥ðŸŽ™ï¸â”‚Ø§Ù„Ù€ØªÙ€Ù†Ø²ÙŠÙ€Ù„Ø§Øªâ”‚ðŸ“½ï¸â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸ“»â¯ .Ø§ØºÙ†ÙŠÙ‡
â— ðŸ“½ï¸â¯ .ÙÙŠØ¯ÙŠÙˆ
â— ðŸŽ¥â¯ .ÙŠÙˆØªÙŠÙˆØ¨
â— ðŸ§¸â¯ .Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…
â— ðŸ“±â¯ .Ø§Ø¨Ùƒ-Ù…ÙˆØ¯
â— ðŸ“±â¯ .ØªØ·Ø¨ÙŠÙ‚
â— ðŸ“·â¯ .ØµÙˆØ±Ù‡
â— ðŸŒ…â¯ .Ø®Ù„ÙÙŠÙ‡
â— ðŸŽµâ¯ .ØªÙŠÙƒ
â— ðŸ–¼â¯ .ØµÙˆØ±ØªÙŠÙƒ
â— â“‚ï¸â¯ .ÙÙŠØ³
â— ðŸŽ§â¯ .Ø§Ø³ØªÙˆØ±ÙŠ
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥âš™ï¸â”‚Ø§Ù„Ù€Ø¨Ù€Ø­Ù€Ø«â”‚ðŸ“Šâ©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸ”â¯ .ÙÙŠØ¯ÙŠÙˆ
â— ðŸ”â¯ .ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§
â— ðŸ–¨ï¸â¯ .Ù…Ø§Ù†Ø¬Ø§
â— â˜â¯ .Ø§Ù„Ø·Ù‚Ø³
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
     â©¥ðŸžï¸â”‚Ø§Ù„Ø§Ø¯ÙŠÙ€Øª Ùˆ Ø§Ù„Ù€ØµÙ€ÙˆØ±Ù‡â”‚ðŸ“¹â©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸ“¹â¯ .Ø§ÙŠØ¯ÙŠØª
â— ðŸ“¹â¯ .Ø§ÙŠØ¯ÙŠØª2
â— ðŸŽ´â¯ .Ø®Ù„ÙÙŠØ§Øª
â— ðŸ‘©ðŸ»â€â¤ï¸â€ðŸ‘¨ðŸ»â¯ .ØªØ·Ù‚ÙŠÙ…
â— ðŸ™‹ðŸ»â€â™‚ï¸â¯ .Ø·Ù‚Ù…-Ø§ÙˆÙ„Ø§Ø¯
â— ðŸ™‹ðŸ»â€â™€ï¸â¯ .Ø·Ù‚Ù…-Ø¨Ù†Ø§Øª
â— âš½â¯ .ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ
â— ðŸâ¯ .Ù…ÙŠØ³ÙŠ
â— ðŸ¦®â¯ .ÙƒÙ„Ø¨
â— ðŸˆâ¯ .Ù‚Ø·
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
           â©¥ðŸ“Œâ”‚Ø§Ù„Ø§Ø¹Ø¶Ù€Ø§Ø¡â”‚ðŸ“Œâ©¤
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*
â— ðŸ‘¨ðŸ»â€ðŸ’»â¯ .Ø§Ù„Ù…Ø·ÙˆØ±
â— âœ´ï¸â¯ .ØªØ³Ø¬ÙŠÙ„
â— ðŸ“â¯ .Ø§Ù‚ØªØ¨Ø§Ø³
â— ðŸ”–â¯ .Ø¨Ø±ÙˆÙØ§ÙŠÙ„
â— ðŸâ¯ .Ø§Ù„Ø¯Ø¹Ù…
â— ðŸš€â¯ .Ø¨Ù†Ø¬
â— ðŸ‘¾â¯ .Ø¨ÙˆØª
*âƒ â”€â”€â”€â”€â”€â”€âŠ° â€ âŠ±â”€â”€â”€â”€â”€â”€ âƒ*`
    const { result, key, timeout } = await conn.sendMessage(m.chat, { video: { url: menuvid }, caption: str.trim(),  gifPlayback: true,
  gifAttribution: 0}, { quoted: fcontact })
    m.react(done)

}
handler.help = ['main']
handler.tags = ['group']
handler.command = ['Ø§Ù„Ø§ÙˆØ§Ù…Ø±', 'Ø§Ù„Ù…Ù‡Ø§Ù…','Ø§ÙˆØ§Ù…Ø±','Ø§Ù„Ø£ÙˆØ§Ù…Ø±'] 

export default handler
function clockString(ms) {
    let h = isNaN(ms) ? '--' : Math.floor(ms / 3600000)
    let m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60
    let s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60
    return [h, m, s].map(v => v.toString().padStart(2, 0)).join(':')}
    
    function ucapan() {
      const time = moment.tz('Asia/Kolkata').format('HH')
      let res = "ØµØ¨Ø§Ø­ Ø§Ù„ÙÙ„ â˜€ï¸"
      if (time >= 4) {
        res = "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ðŸŒ„"
      }
      if (time >= 10) {
        res = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± â˜€ï¸"
      }
      if (time >= 15) {
        res = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ± ðŸŒ‡"
      }
      if (time >= 18) {
        res = "ØªØµØ¨Ø­ Ø¹Ù„Ù‰ Ø®ÙŠØ± ðŸŒ™"
      }
      return res
        }
